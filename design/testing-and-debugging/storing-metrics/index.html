<!DOCTYPE html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7"><![endif]-->
<!--[if IE 7]><html class="no-js lt-ie9 lt-ie8" <![endif]-->
<!--[if IE 8]><html class="no-js lt-ie9" <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js">
<!--<![endif]-->

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Storing Metrics and Insights | MobiledgeX Developers</title>
<meta name="description" content="Learn how to use our application metrics to detect performance anomalies" />
<meta property="og:type" content="website" />
<meta property="og:title" content="Storing Metrics and Insights" />
<meta property="og:description" content="Learn how to use our application metrics to detect performance anomalies" />
<meta property="og:url" content="http://dev-v3.test/design/testing-and-debugging/storing-metrics" />
<meta property="og:site_name" content="MobiledgeX Developers" />
<meta property="og:locale" content="en_US" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:site" content="@mobiledgex" />
<meta name="twitter:title" content="Storing Metrics and Insights" />
<meta name="twitter:description" content="Learn how to use our application metrics to detect performance anomalies" />
<meta property="og:image" content="http://dev-v3.test/img/containers/assets/social-developers.jpg/b1d19eb47e0ea441f7510b1a27b43974.jpg" />
<meta property="og:image:width" content="1200" />
<meta property="og:image:height" content="1200" />
<meta property="og:image:alt" content="" />
<meta name="twitter:image" content="http://dev-v3.test/img/containers/assets/social-developers.jpg/b1d19eb47e0ea441f7510b1a27b43974.jpg" />
<meta name="twitter:image:alt" content="" />
<link href="http://dev-v3.test/" rel="home" />
<link href="http://dev-v3.test/design/testing-and-debugging/storing-metrics" rel="canonical" />
<link type="text/plain" rel="author" href="http://dev-v3.test/humans.txt" />
  <script src="//code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
    crossorigin="anonymous"></script>

  <link rel="stylesheet" href="/css/theme.css?v=1643734718">
  <link rel="stylesheet" href="/css/androidstudio.min.css?v=1628534070">
  <script src="/js/highlight.min.js?v=1628534070"></script>

  <meta name="robots" content="noindex,nofollow">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.11.1/tocbot.min.js"></script>

  <meta name="theme-color" content="#273c4c">
</head>


<body
  class="bg-white default">

  <header class="duik-header">
  <nav class="properties navbar fixed-top d-none d-md-flex">
    <ul>
      <li><a href="https://mobiledgex.com">MobiledgeX Home</a></li>
      <li><a href="https://mobiledgex.com/product">Product</a></li>
      <li><a href="https://mobiledgex.com/use-cases">Use Cases</a></li>
      <li><a href="https://mobiledgex.com/about">About</a></li>
      <li><a href="https://mobiledgex.com/blog">Blog</a></li>
    </ul>
  </nav>
  <nav class="navbar navbar-dark fixed-top bg-terrain flex-nowrap p-0 main-nav">
    <a class="navbar-brand col-md-3 col-xl-2 mr-0 py-3" href="/">
      <img src="/img/logo-white.svg?v=1592862229" alt="MobiledgeX Developers" />
    </a>
    <ul class="navbar-nav duik-header__nav small text-nowrap flex-row px-3 ml-0 ml-sm-3">
      <li class="nav-item ml-lg-6 mb-2 mb-lg-0 d-none d-lg-inline">
        <a class="nav-link px-0" href="/getting-started">Getting
          Started</a>
      </li>
      <li class="nav-item ml-lg-6 mb-2 mb-lg-0 d-none d-lg-inline">
        <a class="nav-link px-0" href="/deployments">Guides and
          Tutorials</a>
      </li>
      <li class="nav-item ml-lg-6 mb-2 mb-lg-0 d-none d-xl-inline">
        <a class="nav-link px-0 active" href="/design">Design Principles</a>
      </li>
      <li class="nav-item ml-lg-6 mb-2 mb-lg-0 d-none d-xl-inline">
        <a class="nav-link px-0" href="/sdks">SDK and Libraries</a>
      </li>
      <li class="nav-item ml-lg-6 mb-2 mb-lg-0 d-none d-lg-inline">
        <a class="nav-link px-0" href="/apis">API Reference</a>
      </li>
      <li class="nav-item ml-lg-6 mb-2 mb-lg-0 d-none d-md-inline">
        <a class="nav-link px-0" href="/support">Support</a>
      </li>
      <li class="nav-item ml-lg-6 mb-2 mb-lg-0 d-none d-md-inline">
        <a class="nav-link px-0"
          href="/product/mobiledgex-community">Community</a>
      </li>
      <!-- Responsive Toggle Button -->
      <div class="d-flex d-md-none justify-content-between mb-5">
        <button class="btn btn-link pl-0" type="button" data-toggle="collapse" data-target="#sidebar-nav"
          aria-controls="sidebar-nav" aria-expanded="false" aria-label="Toggle navigation">
          <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 30 30" width="30" height="30" focusable="false">
            <path stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-miterlimit="10"
              d="M4 7h22M4 15h22M4 23h22" />
          </svg>
        </button>
      </div>
      <!-- End Responsive Toggle Button -->
    </ul>
  </nav>
</header>


  <div class="container-fluid">
    <div class="row">
      <nav class="col-md-3 col-xl-2 bg-light duik-sidebar navbar-expand-md">
  <div class="collapse navbar-collapse" id="sidebar-nav">
    <div class="js-scrollbar duik-sidebar-sticky">
      <ul class="duik-sidebar__nav">
                          <li class="duik-sidebar__item">
            <a href="/getting-started" class="duik-sidebar__link">Getting Started</a>
          </li>
                                  <li class="subs depth-1 duik-sidebar__item">
            <a class="duik-sidebar__link">Product Overview</a>
              <ul class="duik-sidebar__nav">
                <li class="duik-sidebar__item"><a href="/product" class="duik-sidebar__link">Overview</a></li>
                                  <li class="duik-sidebar__item">
            <a href="/product/overview" class="duik-sidebar__link">What is MobiledgeX?</a>
          </li>
                                  <li class="duik-sidebar__item">
            <a href="/product/mobiledgex-edge-cloud" class="duik-sidebar__link">MobiledgeX Edge-Cloud Console</a>
          </li>
                                  <li class="duik-sidebar__item">
            <a href="/product/mobiledgex-sdk" class="duik-sidebar__link">MobiledgeX Client SDKs</a>
          </li>
                                  <li class="duik-sidebar__item">
            <a href="/product/mobiledgex-edge-services" class="duik-sidebar__link">MobiledgeX Edge Services</a>
          </li>
                                  <li class="duik-sidebar__item">
            <a href="/product/mobiledgex-community" class="duik-sidebar__link">MobiledgeX Developer Community</a>
          </li>
                                  <li class="duik-sidebar__item">
            <a href="/product/mobiledgex-demo" class="duik-sidebar__link">MobiledgeX Demo App</a>
          </li>
                
              </ul>
          </li>
                                  <li class="subs depth-1 duik-sidebar__item">
            <a class="duik-sidebar__link">Console App Deployments</a>
              <ul class="duik-sidebar__nav">
                <li class="duik-sidebar__item"><a href="/deployments" class="duik-sidebar__link">Overview</a></li>
                                  <li class="subs depth-2 duik-sidebar__item">
            <a class="duik-sidebar__link">Organizations</a>
              <ul class="duik-sidebar__nav">
                <li class="duik-sidebar__item"><a href="/deployments/accounts" class="duik-sidebar__link">Overview</a></li>
                                  <li class="duik-sidebar__item">
            <a href="/deployments/accounts/manage-accts" class="duik-sidebar__link">Manage Accounts</a>
          </li>
                                  <li class="duik-sidebar__item">
            <a href="/deployments/accounts/org-users" class="duik-sidebar__link">Developer Organizations</a>
          </li>
                
              </ul>
          </li>
                                  <li class="duik-sidebar__item">
            <a href="/deployments/supported-apps-types" class="duik-sidebar__link">Application Types</a>
          </li>
                                  <li class="subs depth-2 duik-sidebar__item">
            <a class="duik-sidebar__link">Deployment Essentials</a>
              <ul class="duik-sidebar__nav">
                <li class="duik-sidebar__item"><a href="/deployments/deployment-workflow" class="duik-sidebar__link">Overview</a></li>
                                  <li class="duik-sidebar__item">
            <a href="/deployments/deployment-workflow/cloudlets" class="duik-sidebar__link">Cloudlets</a>
          </li>
                                  <li class="duik-sidebar__item">
            <a href="/deployments/deployment-workflow/cloudlet-pools" class="duik-sidebar__link">Cloudlet Pools</a>
          </li>
                                  <li class="duik-sidebar__item">
            <a href="/deployments/deployment-workflow/flavors" class="duik-sidebar__link">Flavors</a>
          </li>
                                  <li class="duik-sidebar__item">
            <a href="/deployments/deployment-workflow/clusters" class="duik-sidebar__link">Cluster Instances</a>
          </li>
                                  <li class="duik-sidebar__item">
            <a href="/deployments/deployment-workflow/app-definition" class="duik-sidebar__link">Application Definition</a>
          </li>
                                  <li class="duik-sidebar__item">
            <a href="/deployments/deployment-workflow/app-instances" class="duik-sidebar__link">Application Instances</a>
          </li>
                
              </ul>
          </li>
                                  <li class="subs depth-2 duik-sidebar__item">
            <a class="duik-sidebar__link">How-To Guides</a>
              <ul class="duik-sidebar__nav">
                <li class="duik-sidebar__item"><a href="/deployments/application-deployment-guides" class="duik-sidebar__link">Overview</a></li>
                                  <li class="subs depth-3 duik-sidebar__item">
            <a class="duik-sidebar__link">MobiledgeX Hello World</a>
              <ul class="duik-sidebar__nav">
                <li class="duik-sidebar__item"><a href="/deployments/application-deployment-guides/hello-world" class="duik-sidebar__link">Overview</a></li>
                                  <li class="duik-sidebar__item">
            <a href="/deployments/application-deployment-guides/hello-world/uploading-your-first-docker-image" class="duik-sidebar__link">Create and Upload Your First Docker Image</a>
          </li>
                                  <li class="duik-sidebar__item">
            <a href="/deployments/application-deployment-guides/hello-world/running-your-first-docker-image" class="duik-sidebar__link">Running a Docker Image as an Application Instance</a>
          </li>
                
              </ul>
          </li>
                                  <li class="subs depth-3 duik-sidebar__item">
            <a class="duik-sidebar__link">Deploying Virtual Machines</a>
              <ul class="duik-sidebar__nav">
                <li class="duik-sidebar__item"><a href="/deployments/application-deployment-guides/virtual-machine" class="duik-sidebar__link">Overview</a></li>
                                  <li class="duik-sidebar__item">
            <a href="/deployments/application-deployment-guides/virtual-machine/linux" class="duik-sidebar__link">How To Deploy Linux VMs</a>
          </li>
                                  <li class="duik-sidebar__item">
            <a href="/deployments/application-deployment-guides/virtual-machine/windows" class="duik-sidebar__link">How To Deploy Windows VMs</a>
          </li>
                
              </ul>
          </li>
                                  <li class="duik-sidebar__item">
            <a href="/deployments/application-deployment-guides/how-to-deploy-docker-compose" class="duik-sidebar__link">Deploy Docker Compose using Multiple Files</a>
          </li>
                                  <li class="duik-sidebar__item">
            <a href="/deployments/application-deployment-guides/gpu" class="duik-sidebar__link">Deploy GPU Applications</a>
          </li>
                                  <li class="duik-sidebar__item">
            <a href="/deployments/application-deployment-guides/deploy-helm" class="duik-sidebar__link">Deploy a Helm V3 Application</a>
          </li>
                                  <li class="duik-sidebar__item">
            <a href="/deployments/application-deployment-guides/deploy-a-kubernetes-application" class="duik-sidebar__link">Deploy a Kubernetes Application</a>
          </li>
                
              </ul>
          </li>
                                  <li class="subs depth-2 duik-sidebar__item">
            <a class="duik-sidebar__link">Runtime Policies</a>
              <ul class="duik-sidebar__nav">
                <li class="duik-sidebar__item"><a href="/deployments/application-runtime" class="duik-sidebar__link">Overview</a></li>
                                  <li class="duik-sidebar__item">
            <a href="/deployments/application-runtime/autoscale" class="duik-sidebar__link">Auto Scaling with Kubernetes</a>
          </li>
                                  <li class="duik-sidebar__item">
            <a href="/deployments/application-runtime/auto-prov" class="duik-sidebar__link">Auto Provisioning Policy</a>
          </li>
                                  <li class="duik-sidebar__item">
            <a href="/deployments/application-runtime/high-availability" class="duik-sidebar__link">High Availabilty</a>
          </li>
                
              </ul>
          </li>
                                  <li class="duik-sidebar__item">
            <a href="/deployments/security" class="duik-sidebar__link">Security & Trust Policy</a>
          </li>
                                  <li class="subs depth-2 duik-sidebar__item">
            <a class="duik-sidebar__link">Monitoring Apps</a>
              <ul class="duik-sidebar__nav">
                <li class="duik-sidebar__item"><a href="/deployments/monitoring-and-metrics" class="duik-sidebar__link">Overview</a></li>
                                  <li class="duik-sidebar__item">
            <a href="/deployments/monitoring-and-metrics/application-utilization-metrics" class="duik-sidebar__link">Utilization Metrics</a>
          </li>
                                  <li class="duik-sidebar__item">
            <a href="/deployments/monitoring-and-metrics/logs" class="duik-sidebar__link">Usage Logs & Events</a>
          </li>
                                  <li class="duik-sidebar__item">
            <a href="/deployments/monitoring-and-metrics/monitoring-edge-events" class="duik-sidebar__link">Monitoring Edge Events</a>
          </li>
                
              </ul>
          </li>
                                  <li class="subs depth-2 duik-sidebar__item">
            <a class="duik-sidebar__link">Continuous Deployment / Integration</a>
              <ul class="duik-sidebar__nav">
                <li class="duik-sidebar__item"><a href="/deployments/ci-cd" class="duik-sidebar__link">Overview</a></li>
                                  <li class="duik-sidebar__item">
            <a href="/deployments/ci-cd/github-actions" class="duik-sidebar__link">GitHub Actions</a>
          </li>
                
              </ul>
          </li>
                
              </ul>
          </li>
                                  <li class="subs depth-1 duik-sidebar__item">
            <a class="duik-sidebar__link">Client SDK Integration</a>
              <ul class="duik-sidebar__nav">
                <li class="duik-sidebar__item"><a href="/sdks" class="duik-sidebar__link">Overview</a></li>
                                  <li class="duik-sidebar__item">
            <a href="/sdks/tech-overview" class="duik-sidebar__link">Technical Overview</a>
          </li>
                                  <li class="duik-sidebar__item">
            <a href="/sdks/edge-events-overview" class="duik-sidebar__link">Edge Events Overview</a>
          </li>
                                  <li class="subs depth-2 duik-sidebar__item">
            <a class="duik-sidebar__link">Android SDK</a>
              <ul class="duik-sidebar__nav">
                <li class="duik-sidebar__item"><a href="/sdks/android-sdk" class="duik-sidebar__link">Overview</a></li>
                                  <li class="duik-sidebar__item">
            <a href="/sdks/android-sdk/android-sdk-download" class="duik-sidebar__link">Download Instructions</a>
          </li>
                                  <li class="duik-sidebar__item">
            <a href="/sdks/android-sdk/android-sdk-sample" class="duik-sidebar__link">SDK Sample App</a>
          </li>
                                  <li class="duik-sidebar__item">
            <a href="/sdks/android-sdk/add-face-detection" class="duik-sidebar__link">Integrate Face Detection</a>
          </li>
                                  <li class="duik-sidebar__item">
            <a href="/sdks/android-sdk/android-third-party-licenses" class="duik-sidebar__link">Android Third Party Licenses</a>
          </li>
                
              </ul>
          </li>
                                  <li class="subs depth-2 duik-sidebar__item">
            <a class="duik-sidebar__link">iOS SDK</a>
              <ul class="duik-sidebar__nav">
                <li class="duik-sidebar__item"><a href="/sdks/ios-sdk" class="duik-sidebar__link">Overview</a></li>
                                  <li class="duik-sidebar__item">
            <a href="/sdks/ios-sdk/ios-sdk-download" class="duik-sidebar__link">Download Instructions</a>
          </li>
                                  <li class="duik-sidebar__item">
            <a href="/sdks/ios-sdk/ios-sdk-sample" class="duik-sidebar__link">Augmented Reality Sample App</a>
          </li>
                                  <li class="duik-sidebar__item">
            <a href="/sdks/ios-sdk/ios-sdk-third-party-licenses" class="duik-sidebar__link">iOS SDK Third Party Licenses</a>
          </li>
                
              </ul>
          </li>
                                  <li class="subs depth-2 duik-sidebar__item">
            <a class="duik-sidebar__link">Unity SDK</a>
              <ul class="duik-sidebar__nav">
                <li class="duik-sidebar__item"><a href="/sdks/unity-sdk" class="duik-sidebar__link">Overview</a></li>
                                  <li class="duik-sidebar__item">
            <a href="/sdks/unity-sdk/c-sharp-sdk" class="duik-sidebar__link">C# Download Instructions</a>
          </li>
                                  <li class="duik-sidebar__item">
            <a href="/sdks/unity-sdk/unity-sdk-download" class="duik-sidebar__link">Unity Download Instructions</a>
          </li>
                                  <li class="duik-sidebar__item">
            <a href="/sdks/unity-sdk/unity-sdk-sample" class="duik-sidebar__link">Unity Sample App</a>
          </li>
                                  <li class="duik-sidebar__item">
            <a href="/sdks/unity-sdk/edge-events" class="duik-sidebar__link">Unity Edge Events (Beta)</a>
          </li>
                                  <li class="duik-sidebar__item">
            <a href="/sdks/unity-sdk/c-sdk-third-party-licenses" class="duik-sidebar__link">C# SDK Third Party Licenses</a>
          </li>
                
              </ul>
          </li>
                
              </ul>
          </li>
                                  <li class="subs depth-1 duik-sidebar__item">
            <a class="duik-sidebar__link">MobiledgeX Edge Services</a>
              <ul class="duik-sidebar__nav">
                <li class="duik-sidebar__item"><a href="/services" class="duik-sidebar__link">Overview</a></li>
                                  <li class="subs depth-2 duik-sidebar__item">
            <a class="duik-sidebar__link">MobiledgeX Computer Vision</a>
              <ul class="duik-sidebar__nav">
                <li class="duik-sidebar__item"><a href="/services/computer-vision" class="duik-sidebar__link">Overview</a></li>
                                  <li class="duik-sidebar__item">
            <a href="/services/computer-vision/cv-deployment" class="duik-sidebar__link">Computer Vision Server Deployment</a>
          </li>
                                  <li class="duik-sidebar__item">
            <a href="/services/computer-vision/how-to-computer-vision-api" class="duik-sidebar__link">Computer Vision Server REST API</a>
          </li>
                                  <li class="duik-sidebar__item">
            <a href="/services/computer-vision/add-comp-vision-unity" class="duik-sidebar__link">Unity Computer Vision SDK</a>
          </li>
                
              </ul>
          </li>
                                  <li class="subs depth-2 duik-sidebar__item">
            <a class="duik-sidebar__link">MobiledgeX Multiplayer Service</a>
              <ul class="duik-sidebar__nav">
                <li class="duik-sidebar__item"><a href="/services/unity-edgemultiplay" class="duik-sidebar__link">Overview</a></li>
                                  <li class="duik-sidebar__item">
            <a href="/services/unity-edgemultiplay/how-to-use-edge-multiplay" class="duik-sidebar__link">Getting Started with EdgeMultiplay</a>
          </li>
                                  <li class="duik-sidebar__item">
            <a href="/services/unity-edgemultiplay/running-edge-multiplay" class="duik-sidebar__link">Running the EdgeMultiplay Server Locally</a>
          </li>
                
              </ul>
          </li>
                
              </ul>
          </li>
                                  <li class="subs depth-1 duik-sidebar__item">
            <a class="duik-sidebar__link">Edge Developer Tools</a>
              <ul class="duik-sidebar__nav">
                <li class="duik-sidebar__item"><a href="/tools" class="duik-sidebar__link">Overview</a></li>
                                  <li class="subs depth-2 duik-sidebar__item">
            <a class="duik-sidebar__link">Command Line Interface: mcctl</a>
              <ul class="duik-sidebar__nav">
                <li class="duik-sidebar__item"><a href="/tools/mcctl-guides" class="duik-sidebar__link">Overview</a></li>
                                  <li class="duik-sidebar__item">
            <a href="/tools/mcctl-guides/api-key-access" class="duik-sidebar__link">API Key Access and Permissions</a>
          </li>
                                  <li class="duik-sidebar__item">
            <a href="/tools/mcctl-guides/mcctl-developer" class="duik-sidebar__link">How to use the mcctl utility for Developers</a>
          </li>
                                  <li class="subs depth-3 duik-sidebar__item">
            <a class="duik-sidebar__link">mcctl Utility Reference</a>
              <ul class="duik-sidebar__nav">
                <li class="duik-sidebar__item"><a href="/tools/mcctl-guides/mcctl-reference" class="duik-sidebar__link">Overview</a></li>
                                  <li class="duik-sidebar__item">
            <a href="/tools/mcctl-guides/mcctl-reference/mcctl-installation-and-setup-guide" class="duik-sidebar__link">mcctl Installation and Setup Guide</a>
          </li>
                                  <li class="duik-sidebar__item">
            <a href="/tools/mcctl-guides/mcctl-reference/metric-and-usage-commands" class="duik-sidebar__link">Metric and Usage Commands</a>
          </li>
                                  <li class="duik-sidebar__item">
            <a href="/tools/mcctl-guides/mcctl-reference/application-and-monitoring-commands" class="duik-sidebar__link">Application and Monitoring Commands</a>
          </li>
                                  <li class="duik-sidebar__item">
            <a href="/tools/mcctl-guides/mcctl-reference/audit-and-regional-commands" class="duik-sidebar__link">Regional Commands</a>
          </li>
                                  <li class="duik-sidebar__item">
            <a href="/tools/mcctl-guides/mcctl-reference/alert-management-commands" class="duik-sidebar__link">Alert Management Commands</a>
          </li>
                                  <li class="duik-sidebar__item">
            <a href="/tools/mcctl-guides/mcctl-reference/automatic-policies-commands" class="duik-sidebar__link">Automatic Policies Commands</a>
          </li>
                
              </ul>
          </li>
                
              </ul>
          </li>
                                  <li class="duik-sidebar__item">
            <a href="/tools/edgebox" class="duik-sidebar__link">Local Edge Testing : EdgeBox</a>
          </li>
                
              </ul>
          </li>
                                  <li class="subs depth-1 duik-sidebar__item active">
            <a class="duik-sidebar__link">Design Principles</a>
              <ul class="duik-sidebar__nav">
                <li class="duik-sidebar__item"><a href="/design" class="duik-sidebar__link">Overview</a></li>
                                  <li class="duik-sidebar__item">
            <a href="/design/best-practice-container-deploy" class="duik-sidebar__link">Best Practices : Deployments</a>
          </li>
                                  <li class="duik-sidebar__item">
            <a href="/design/best-practice-sdk" class="duik-sidebar__link">Best Practices : Client SDKs</a>
          </li>
                                  <li class="duik-sidebar__item">
            <a href="/design/load-balancing" class="duik-sidebar__link">Best Practices : Load Balancing</a>
          </li>
                                  <li class="duik-sidebar__item">
            <a href="/design/sizing-applications" class="duik-sidebar__link">Best Practices : Sizing Applications</a>
          </li>
                                  <li class="subs depth-2 duik-sidebar__item active">
            <a class="duik-sidebar__link">Best Practices: Debugging</a>
              <ul class="duik-sidebar__nav">
                <li class="duik-sidebar__item"><a href="/design/testing-and-debugging" class="duik-sidebar__link">Overview</a></li>
                                  <li class="duik-sidebar__item">
            <a href="/design/testing-and-debugging/alarms" class="duik-sidebar__link">Alerts</a>
          </li>
                                  <li class="duik-sidebar__item">
            <a href="/design/testing-and-debugging/health-check" class="duik-sidebar__link">Health Check</a>
          </li>
                                  <li class="duik-sidebar__item active current">
            <a href="/design/testing-and-debugging/storing-metrics" class="duik-sidebar__link">Storing Metrics and Insights</a>
          </li>
                
              </ul>
          </li>
                                  <li class="duik-sidebar__item">
            <a href="/design/how-to-stress-test" class="duik-sidebar__link">Stress Testing</a>
          </li>
                                  <li class="duik-sidebar__item">
            <a href="/design/running-sshd-inside-container" class="duik-sidebar__link">Running SSHD Inside a Container</a>
          </li>
                
              </ul>
          </li>
                                  <li class="subs depth-1 duik-sidebar__item">
            <a class="duik-sidebar__link">MobiledgeX Release Notes</a>
              <ul class="duik-sidebar__nav">
                <li class="duik-sidebar__item"><a href="/release-notes" class="duik-sidebar__link">Overview</a></li>
                                  <li class="duik-sidebar__item">
            <a href="/release-notes/sdk" class="duik-sidebar__link">SDK Release Notes</a>
          </li>
                                  <li class="subs depth-2 duik-sidebar__item">
            <a class="duik-sidebar__link">Console Release Notes</a>
              <ul class="duik-sidebar__nav">
                <li class="duik-sidebar__item"><a href="/release-notes/console" class="duik-sidebar__link">Overview</a></li>
                                  <li class="duik-sidebar__item">
            <a href="/release-notes/console/release-notes-3-0" class="duik-sidebar__link">3.0</a>
          </li>
                                  <li class="duik-sidebar__item">
            <a href="/release-notes/console/2_4_0" class="duik-sidebar__link">2.4</a>
          </li>
                                  <li class="duik-sidebar__item">
            <a href="/release-notes/console/2_0_0" class="duik-sidebar__link">2.0</a>
          </li>
                
              </ul>
          </li>
                
              </ul>
          </li>
                                  <li class="subs depth-1 duik-sidebar__item">
            <a class="duik-sidebar__link">API Reference</a>
              <ul class="duik-sidebar__nav">
                <li class="duik-sidebar__item"><a href="/apis" class="duik-sidebar__link">Overview</a></li>
                                  <li class="duik-sidebar__item">
            <a href="https://api.mobiledgex.net" class="duik-sidebar__link">Device APIs</a>
          </li>
                                  <li class="duik-sidebar__item">
            <a href="https://api.mobiledgex.net/mc" class="duik-sidebar__link">Edge Orchestration APIs</a>
          </li>
                                  <li class="duik-sidebar__item">
            <a href="https://mobiledgex.github.io/edge-cloud-sdk-unity" class="duik-sidebar__link">Unity SDK Manual</a>
          </li>
                                  <li class="duik-sidebar__item">
            <a href="https://mobiledgex.github.io/edge-cloud-sdk-android/" class="duik-sidebar__link">Android SDK Manual</a>
          </li>
                                  <li class="duik-sidebar__item">
            <a href="https://mobiledgex.github.io/MatchingEngineSDK/rest/index.html" class="duik-sidebar__link">Swift SDK Manual</a>
          </li>
                                  <li class="duik-sidebar__item">
            <a href="https://api.mobiledgex.net/swagger/mexdemo/edge-cloud-sdk-csharp/html/index.html" class="duik-sidebar__link">C# SDK Manual</a>
          </li>
                
              </ul>
          </li>
                                  <li class="duik-sidebar__item">
            <a href="/support" class="duik-sidebar__link">FAQs and Support</a>
          </li>
                                  <li class="duik-sidebar__item">
          </li>
                                  <li class="duik-sidebar__item">
            <a href="/glossary-of-terms" class="duik-sidebar__link">Glossary of Terms</a>
          </li>
                
      </ul>
      <hr class="d-block d-md-none">
      <ul class="duik-sidebar__nav d-block d-md-none">
        <li class="duik-sidebar__item"><a href="https://mobiledgex.com" class="duik-sidebar__link">MobiledgeX Home</a></li>
        <li class="duik-sidebar__item"><a href="https://mobiledgex.com/product" class="duik-sidebar__link">Product</a></li>
        <li class="duik-sidebar__item"><a href="https://mobiledgex.com/use-cases" class="duik-sidebar__link">Use Cases</a></li>
        <li class="duik-sidebar__item"><a href="https://mobiledgex.com/about" class="duik-sidebar__link">About</a></li>
        <li class="duik-sidebar__item"><a href="https://mobiledgex.com/blog" class="duik-sidebar__link">Blog</a></li>
        <li class="duik-sidebar__item"><a href="https://operators.mobiledgex.com" class="duik-sidebar__link">Operators</a></li>
      </ul>
    </div>
  </div>
</nav>
<script type="text/javascript">
    $(document).ready(function() {
      $('li.subs.depth-3 > a').click(function() {
        if ($(this).parent().hasClass('active')) {
          $('li.subs.depth-3').removeClass('active');
        } else {
          $('li.subs.depth-3').removeClass('active');
          $(this).parent().toggleClass('active');
        }
      });
      $('li.subs.depth-2 > a').click(function() {
        if ($(this).parent().hasClass('active')) {
          $('li.subs.depth-2').removeClass('active');
        } else {
          $('li.subs.depth-2').removeClass('active');
          $(this).parent().toggleClass('active');
        }
      });
      $('li.subs.depth-1 > a').click(function() {
        if ($(this).parent().hasClass('active')) {
          $('li.subs.depth-1').removeClass('active');
        } else {
          $('li.subs.depth-1').removeClass('active');
          $(this).parent().toggleClass('active');
        }
      })
    });
</script>

                  <main class="ml-md-auto col-md-9 col-xl-10 px-4 pt-0 pt-md-11">
        <div class="row pt-3">
          <div class="col-xl-2 order-xl-2 d-none d-xl-inline-block toc"></div>          <div class="col-xl-10 order-xl-1 duik-content border-bottom">
            <div class="mb-7">
              <script type="text/javascript">
  $(document).ready(function () {
    $('#copyshortlink').click(function (e) {
      e.preventDefault()
      var copyText = document.getElementById('shortlink')
      var tooltip = document.getElementById('myTooltip')
      $(copyText).show()
      copyText.select()
      copyText.setSelectionRange(0, 99999)
      document.execCommand('copy')
      $(copyText).hide()
      tooltip.innerHTML = 'Copied: ' + copyText.value
    })
    $('#copyshortlink').mouseout(function () {
      var tooltip = document.getElementById('myTooltip')
      tooltip.innerHTML = 'Copy link to clipboard'
    })
  })
</script>


<div class="markdown-body">
      <h1>
    Storing Metrics and Insights 
  </h1>
    
<p>The MobiledgeX platform provides the ability to retrieve metrics on your applications and clusters via both the Web Console and the MobiledgeX API. MobiledgeX controls the granularity and retention policy for these metrics. If you wish more control over your metrics, you can write an ETL pipeline to move the metrics that you are interested into your own <a href="https://en.wikipedia.org/wiki/Time_series_database">Time Series Database</a>(TSDB).</p>
<h2 id='influxdb-example'><a class='anchor' aria-hidden='true' href='#influxdb-example'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1' width='16' height='16' aria-hidden='true'><path fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z'></path></svg></a>InfluxDB Example</h2>
<p>This example uses InfluxDB as a TSDB to store application metric data.</p>
<h3 id='exclusions'><a class='anchor' aria-hidden='true' href='#exclusions'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1' width='16' height='16' aria-hidden='true'><path fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z'></path></svg></a>Exclusions</h3>
<p>The example script provided is not suited for production use, and is intended solely as a proof of concept. Additionally, please be aware of the following additional limitations of the script:</p>
<ol>
<li>Samples are taken at 10-second intervals.</li>
<li>Metrics being sampled are CPU, disk, and memory.</li>
<li>The MobiledgeX provided timestamp is not being used;instead, we are utilizing InfluxDB to create a timestamp for us.</li>
<li>The InfluxDB installation being used has no security enabled.</li>
<li>The script assumes you have logged into the MobiledgeX console with <code>mcctl</code> and have an active JWT token.</li>
<li>The script relies on data being returned in json format from the <code>mcctl</code> utility.</li>
<li>Please see the script header for additional information.</li>
</ol>
<h3 id='assumptions'><a class='anchor' aria-hidden='true' href='#assumptions'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1' width='16' height='16' aria-hidden='true'><path fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z'></path></svg></a>Assumptions</h3>
<ul>
<li>You have the <code>mcctl</code> utility installed.</li>
<li>You have an account with access to the application you wish to monitor.</li>
<li>You have an InfluxDB installation with a database named <code>mex</code>.</li>
<li>You can read/write to/from the InfluxDB database.</li>
</ul>
<h3 id='script-flow'><a class='anchor' aria-hidden='true' href='#script-flow'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1' width='16' height='16' aria-hidden='true'><path fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z'></path></svg></a>Script Flow</h3>
<p>The script flow is very simple:</p>
<ol>
<li>Pull data from the MobiledgeX API.</li>
<li>Transform the data into the InfluxDB line protocol.</li>
<li>Post the data to InfluxDB using cURL.</li>
<li>Sleep for 10 seconds.</li>
<li>Return to step 1.</li>
</ol>
<h3 id='pulling-data'><a class='anchor' aria-hidden='true' href='#pulling-data'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1' width='16' height='16' aria-hidden='true'><path fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z'></path></svg></a>Pulling Data</h3>
<p>The <code>mcctl</code> command is used to pull data from the MobiledgeX API.</p>
<p><code>mcctl --addr https://console.mobiledgex.net --output-format json metrics app \ region=$REGION app-org=$APPORG appname=$APPNAME appvers=$APPVER last=1&quot;</code></p>
<p>You will need to replace REGION, APPORG, APPNAME, and APPVER with the data that corresponds to the application you wish to monitor. The use of <code>last=1</code> restricts the data returned to the most recently collected metrics. This can be omitted, in which case the API will return multiple rows (unique by timestamp). You can also specify start and end times for metrics. For this example, we will just be using the last collected set of metrics.</p>
<h4 id='return-format'><a class='anchor' aria-hidden='true' href='#return-format'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1' width='16' height='16' aria-hidden='true'><path fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z'></path></svg></a>Return Format</h4>
<p>The data from the above will be returned in json format, and will be presented as follows:</p>
<pre><code>{
  &quot;data&quot;: [
    {
      &quot;Series&quot;: [
        {
          &quot;columns&quot;: [
            &quot;time&quot;,
            &quot;app&quot;,
            &quot;ver&quot;,
            &quot;cluster&quot;,
            &quot;clusterorg&quot;,
            &quot;cloudlet&quot;,
            &quot;cloudletorg&quot;,
            &quot;apporg&quot;,
            &quot;pod&quot;,
            &quot;cpu&quot;
          ],
          &quot;name&quot;: &quot;appinst-cpu&quot;,
          &quot;values&quot;: [
            [
              &quot;2020-08-11T14:51:54.687583518Z&quot;,
              &quot;compose-file-test&quot;,
              &quot;10&quot;,
              &quot;autoclustercompose-file-test&quot;,
              &quot;demoorg&quot;,
              &quot;hamburg-main&quot;,
              &quot;TDG&quot;,
              &quot;demoorg&quot;,
              &quot;compose-file-test&quot;,
              0
            ]
          ]
        }
      ]
    }
  ]
}  
</code></pre>
<p>The structure is as follows:</p>
<ul>
<li>
<code>data</code>: This is the top-level key that all returned data will be presented beneath.
<ul>
<li>
<code>series</code>: This is the level below data and contains information on the metrics you have requested.</li>
<li>
<code>columns</code>: An array of the columns that are being presented. This occurs once in the series.</li>
<li>
<code>name</code>: The name of the metric being returned. This can occur several times in the series, depending on the metrics selected.</li>
<li>
<code>values</code>: An array of the values that correspond to the keys specified in the columns section. This can occur several times in the series, depending on the time/intervals selected.</li>
</ul>
</li>
</ul>
<h3 id='converting-data-to-line-format'><a class='anchor' aria-hidden='true' href='#converting-data-to-line-format'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1' width='16' height='16' aria-hidden='true'><path fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z'></path></svg></a>Converting Data to Line Format</h3>
<p>To load this data into a TSDB we will need to transform it into a format that the DB understands. For our example, we will be changing this data into InfluxDB's <a href="https://docs.influxdata.com/influxdb/v2.0/reference/syntax/line-protocol/">Line Protocol</a>. To do this, we will need to parse the JSON output. To accomplish this, we will be using the <a href="https://stedolan.github.io/jq/">jq</a> utility, along with <a href="https://ss64.com/osx/awk.html">awk</a>. This could also be accomplished using other JSON and text processing tools if desired.</p>
<p><strong>Note</strong>: This document is not intended to guide the usage of <code>jq</code>. The example presented here has been tested and works correctly with the MobiledgeX API's JSON output. This particular example is parsing memory information.</p>
<h4 id='line-protocol-definition'><a class='anchor' aria-hidden='true' href='#line-protocol-definition'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1' width='16' height='16' aria-hidden='true'><path fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z'></path></svg></a>Line Protocol Definition</h4>
<p>In its simplest form line protocol provides the name of the metric, a list of one or more key/value paris of tags, a list of one or more key/value pairs of measurements, and an optional timestamp. The syntax is defined as:</p>
<pre><code>&lt;measurement&gt;[,&lt;tag_key&gt;=&lt;tag_value&gt;[,&lt;tag_key&gt;=&lt;tag_value&gt;]] &lt;field_key&gt;=&lt;field_value&gt;[,&lt;field_key&gt;=&lt;field_value&gt;] [&lt;timestamp&gt;]  
</code></pre>
<p>For our purposes we will be constructing a very basic data payload. The following is an example of what that payload will look like for the memory metric:</p>
<pre><code>mem.app=compose-file-test,ver=10 mem=&quot;1990197&quot;  
</code></pre>
<h4 id='conversion'><a class='anchor' aria-hidden='true' href='#conversion'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1' width='16' height='16' aria-hidden='true'><path fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z'></path></svg></a>Conversion</h4>
<p>We will use the <code>jq</code> utility to convert our data; the following line will take as input the data returned from the MobiledgeX API and parse the JSON to prepare it for final transformation:</p>
<pre><code>jq -r  '.data[0].Series[0] | (.columns | map(.)) as $headers| .values | \
 map(. as $row | $headers | with_entries({&quot;key&quot;: .value, &quot;value&quot;: $row[.key]})) |\
 {measurement: &quot;mem&quot;, mem: .[].mem | tostring, app: .[].app, ver: .[].ver, \
 timestamp: .[].time }| \
 to_entries|map(.value)|@csv  
</code></pre>
<h4 id='breaking-down-that-command-we-are-doing-the-following'><a class='anchor' aria-hidden='true' href='#breaking-down-that-command-we-are-doing-the-following'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1' width='16' height='16' aria-hidden='true'><path fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z'></path></svg></a>Breaking down that command, we are doing the following:</h4>
<ul>
<li>Telling <code>jq</code> to provide the output in raw format (-r) so we can parse the output with <code>awk</code>.</li>
<li>Breaking the data into key/value pairs from the input data provided by the <code>column</code> array and array(s) of <code>values</code> (Lines 1-2).</li>
<li>Creating a new data object containing the measurement, application, version, timestamp, and metric value (Line 3).</li>
<li>Dumping the new data object to CSV output (Line 4).</li>
</ul>
<p>This provides us with the following output:</p>
<pre><code>&quot;mem&quot;,&quot;1990197&quot;,&quot;compose-file-test&quot;,&quot;10&quot;,&quot;2020-08-11T15:15:59.135953533Z&quot;  
<p></code></pre></p>
<p>The next step is finalizing the conversion. To do this we need to manipulate the data into the Line Protocol format. We will be using <code>awk</code> to complete the transformation:</p>
<pre><code>awk -F, '{gsub(&quot;\&quot;&quot;,&quot;&quot;,$0);printf(&quot;%s.app=%s,ver=%s mem=\&quot;%s\&quot;\n&quot;,$1,$3,$4,$2)}'  
<p></code></pre></p>
<p>Breaking down that command, we are doing the following:</p>
<ol>
<li>Using <code>,</code> as our separator character.</li>
<li>Re-ordering the output and adding headers.</li>
</ol>
<p>The final output to be sent to InfluxDB is:</p>
<pre><code>mem.app=compose-file-test,ver=10 mem=&quot;1990197&quot;  
</code></pre>
<h4 id='timestamps'><a class='anchor' aria-hidden='true' href='#timestamps'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1' width='16' height='16' aria-hidden='true'><path fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z'></path></svg></a>Timestamps</h4>
<p>The reason we are allowing the InfluxDB installation to generate a timestamp rather than using the value returned from the API is due to the way that the MobiledgeX API provides the timestamp, and the way that InfluxDB requires timestamps to be presented.</p>
<p>The MobiledgeX API provides timestamps in <a href="https://tools.ietf.org/html/rfc3339">RFC3339</a> format, whereas InfluxDB wants the timestamps to be in <a href="https://en.wikipedia.org/wiki/Unix_time#:~:text=Unix%20time%20,also%20known%20as,UTC%20on%201%20January%201970">Unix Epoch</a> format. Although it is possible to convert between these two (for example, using the GNU <a href="https://www.gnu.org/software/coreutils/manual/html_node/Examples-of-date.html">date</a> program), this has not been done in this POC script to keep the complexity low.</p>
<h4 id='loading-data-to-influxdb'><a class='anchor' aria-hidden='true' href='#loading-data-to-influxdb'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1' width='16' height='16' aria-hidden='true'><path fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z'></path></svg></a>Loading Data to InfluxDB</h4>
<p>The InfluxDB API can be used to load the processed data into InfluxDB. The format for inserting data into InfluxDB using curl is:</p>
<pre><code>curl -i -XPOST 'http://localhost:8086/write?db=mex'
--data-binary 'measurement-name.tag1=value1,tag2=value2 value=123 1434055562000000000'  
</code></pre>
<p>Breaking down the command, we are doing the following:</p>
<ul>
<li>Issuing a POST to the server listening on port 8086 on the localhost.</li>
<li>Using the <code>--data-binary</code> flag to enables us to pass data without it being interpreted.</li>
<li>The <code>-i</code> flag shows us the return headers from the server (useful in debugging).</li>
<li>The string passed conforms to the syntax described above under &quot;Line Protocol&quot;.
For this test, we are going to be inserting the following data:</li>
</ul>
<pre><code>mem.app=compose-file-test,ver=10 mem=&quot;1990197&quot;  
<p></code></pre></p>
<p>To do this, we can write the following cURL command:</p>
<pre><code>$ curl -i -XPOST 'http://localhost:8086/write?db=mex' --data-binary  'mem.app=compose-file-test,ver=10 mem=&quot;1990197&quot;'
HTTP/1.1 204 No Content
Content-Type: application/json
Request-Id: de38aed6-dc1d-11ea-8002-acde48001122
X-Influxdb-Build: OSS
X-Influxdb-Version: v1.8.1
X-Request-Id: de38aed6-dc1d-11ea-8002-acde48001122
Date: Tue, 11 Aug 2020 21:59:02 GMT  
<p></code></pre></p>
<p>The 204 return code indicates that the data was accepted.</p>
<h4 id='verification'><a class='anchor' aria-hidden='true' href='#verification'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1' width='16' height='16' aria-hidden='true'><path fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z'></path></svg></a>Verification</h4>
<p>There are several ways to verify the data being added to InfluxDB. Visualization tools such as <a href="https://grafana.com/">Grafana</a> or <a href="https://www.influxdata.com/time-series-platform/chronograf/">Chronograf</a> can be used, as can the <code>influx</code> CLI utility. For this example, we are going to use the CLI.</p>
<pre><code>$ influx
Connected to http://localhost:8086 version v1.8.1
InfluxDB shell version: v1.8.1
&gt; use mex;
Using database mex
&gt; SELECT * FROM &quot;mex&quot;.&quot;autogen&quot;.&quot;mem.app=compose-file-test&quot; WHERE  &quot;ver&quot;='10' limit 1;
name: mem.app=compose-file-test
time                mem     ver
----                ---     ---
1597096338602015000 1990197 10
&gt;  
<p></code></pre></p>
<h3 id='putting-it-together'><a class='anchor' aria-hidden='true' href='#putting-it-together'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1' width='16' height='16' aria-hidden='true'><path fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z'></path></svg></a>Putting it Together</h3>
<p>The following script uses all of the components that have been discussed in this document. Again, please note that this is intended as a proof of concept demonstration only and is not intended for production usage.</p>
<pre><code>#!/usr/bin/env bash
###########################################################################
#
# This is a simple shell script to show the process of pulling data from the MeX
# metrics API endpoint and pushing them into a local influxdb data store.
#
# This script is intended as a demonstration of how this process can be
# accomplished. This is not intended to be a script that can be productionized without
# major rewriting.
#
# This script makes the following assumptions:
# 1\. You are able to use the `mcctl` program to access the MeX API.
# 2\. You have authenticated the `mcctl` program and saved an access token;
#    this script does not authenticate.
# 3\. You have an influxdb server running on the standard port (8086)
# 4\. There is no security on the influxdb database.
# 5\. You have an existing database called `mex` without security.
#
# The script performs the following tasks:
# 1\. Connects to the api and pulls the most recent update for the given metric.
# 2\. Transforms the returned data using `jq` and `awk` to create influxdb line
#    protocol compatible output.
# 3\. Writes the resulting data into the influxdb `mex` database using `curl`
#
# Notes:
# 1\. Influxdb does not accept RFC3339 formatted dates as returned by the MeX API;
#    Because of this the example allows influxdb to generate a timestamp. In an
#    actual production implementation you would want to use the MeX provided
#    timestamp, which can be converted to epoch time using either the GNU `date`
#    command, or programatically.
#
###########################################################################
# General Variables
MCCTL=/usr/local/bin/mcctl
JQ=/usr/local/bin/jq
INFLUXDB=mex
INFLUXURI=http://localhost:8086
# MeX Vars
APPNAME=compose-file-test
APPVER=&quot;1.0&quot;
APPORG=demoorg
REGION=EU
CONSOLE=&quot;https://console.mobiledgex.net&quot;
MCCTLCONS=&quot;$MCCTL --addr $CONSOLE --output-format json metrics app region=$REGION app-org=$APPORG appname=$APPNAME appvers=$APPVER last=1&quot;
#cURL
CURLC=&quot;curl -X POST  -d @- http://localhost:8086/write?db=mex&quot;
# CPU
$MCCTLCONS selector=cpu | $JQ -r '.data[0].Series[0] | (.columns | map(.)) as $headers| .values | map(. as $row | $headers | with_entries({&quot;key&quot;: .value, &quot;value&quot;: $row[.key]}))| {measurement: &quot;cpu&quot;, cpu: .[].cpu | tostring, app: .[].app, ver: .[].ver, timestamp: .[].time }| to_entries|map(.value)|@csv' | awk -F, '{gsub(&quot;\&quot;&quot;,&quot;&quot;,$0);printf(&quot;%s.app=%s,ver=%s mem=\&quot;%s\&quot;\n&quot;,$1,$3,$4,$2)}' | $CURLRC
# MEM
$MCCTLCONS selector=mem | $JQ -r  '.data[0].Series[0] | (.columns | map(.)) as $headers| .values | map(. as $row | $headers | with_entries({&quot;key&quot;: .value, &quot;value&quot;: $row[.key]}))| {measurement: &quot;mem&quot;, mem: .[].mem | tostring, app: .[].app, ver: .[].ver, timestamp: .[].time }| to_entries|map(.value)|@csv' | awk -F, '{gsub(&quot;\&quot;&quot;,&quot;&quot;,$0);printf(&quot;%s.app=%s,ver=%s mem=\&quot;%s\&quot;\n&quot;,$1,$3,$4,$2)}' | $CURLRC
# NET
$MCCTLCONS selector=network | $JQ -r  '.data[0].Series[0] | (.columns | map(.)) as $headers| .values | map(. as $row | $headers | with_entries({&quot;key&quot;: .value, &quot;value&quot;: $row[.key]}))| {measurement: &quot;recvBytes&quot;, recvBytes: .[].recvBytes | tostring, app: .[].app, ver: .[].ver, timestamp: .[].time }| to_entries|map(.value)|@csv' | awk -F, '{gsub(&quot;\&quot;&quot;,&quot;&quot;,$0);printf(&quot;%s.app=%s,ver=%s mem=\&quot;%s\&quot;\n&quot;,$1,$3,$4,$2)}' | $CURLRC
$MCCTLCONS selector=network | $JQ -r  '.data[0].Series[0] | (.columns | map(.)) as $headers| .values | map(. as $row | $headers | with_entries({&quot;key&quot;: .value, &quot;value&quot;: $row[.key]}))| {measurement: &quot;sendBytes&quot;, sendBytes: .[].sendBytes | tostring, app: .[].app, ver: .[].ver, timestamp: .[].time }| to_entries|map(.value)|@csv' | awk -F, '{gsub(&quot;\&quot;&quot;,&quot;&quot;,$0);printf(&quot;%s.app=%s,ver=%s mem=\&quot;%s\&quot;\n&quot;,$1,$3,$4,$2)}' | $CURLRC
# Disk
$MCCTLCONS selector=disk | $JQ -r  '.data[0].Series[0] | (.columns | map(.)) as $headers| .values | map(. as $row | $headers | with_entries({&quot;key&quot;: .value, &quot;value&quot;: $row[.key]}))| {measurement: &quot;disk&quot;, disk: .[].disk | tostring, app: .[].app, ver: .[].ver, timestamp: .[].time }| to_entries|map(.value)|@csv' | awk -F, '{gsub(&quot;\&quot;&quot;,&quot;&quot;,$0);printf(&quot;%s.app=%s,ver=%s mem=\&quot;%s\&quot;\n&quot;,$1,$3,$4,$2)}' | $CURLRC  
</code></pre>
<h3 id='other-datastores'><a class='anchor' aria-hidden='true' href='#other-datastores'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1' width='16' height='16' aria-hidden='true'><path fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z'></path></svg></a>Other Datastores</h3>
<p>The same techniques shown here can be used to write data from the MobiledgeX metrics API to any other datastore, provided can create an ETL pipeline to load data into your datastore of choice.</p>
<h2 id='writing-metrics-to-csv'><a class='anchor' aria-hidden='true' href='#writing-metrics-to-csv'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1' width='16' height='16' aria-hidden='true'><path fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z'></path></svg></a>Writing Metrics to CSV</h2>
<p>This example shows how to export metrics from the MobiledgeX API and write them to a CSV file, suitable for import to the spreadsheet or analysis program of your choice.</p>
<p>Metrics pulled will include:</p>
<ul>
<li>CPU</li>
<li>MEM</li>
<li>Disk</li>
<li>Network</li>
<li>Connections</li>
</ul>
<h2 id='exclusions'><a class='anchor' aria-hidden='true' href='#exclusions'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1' width='16' height='16' aria-hidden='true'><path fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z'></path></svg></a>Exclusions</h2>
<p>The example script provided is not suited for production use, and is intended solely as a proof of concept. Additionally, please be aware of the following additional limitations of the script:</p>
<ul>
<li>Samples are taken at 10-second intervals.</li>
<li>Metrics being sampled are CPU, disk, network, and memory.</li>
<li>The script assumes you have logged into the MobiledgeX console with mcctl and have an active JWT token.</li>
<li>The script relies on data being returned in json format from the mcctl utility.</li>
<li>Please see the script header for additional information.</li>
</ul>
<h2 id='assumptions'><a class='anchor' aria-hidden='true' href='#assumptions'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1' width='16' height='16' aria-hidden='true'><path fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z'></path></svg></a>Assumptions</h2>
<ul>
<li>You have the mcctl utility installed.</li>
<li>You have an account with access to the application you wish to monitor.</li>
<li>You have an InfluxDB installation with a database named mex.</li>
<li>You can read/write to/from the InfluxDB database.</li>
</ul>
<h2 id='script-flow'><a class='anchor' aria-hidden='true' href='#script-flow'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1' width='16' height='16' aria-hidden='true'><path fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z'></path></svg></a>Script Flow</h2>
<p>The script flow is very simple:</p>
<ol>
<li>Pull data from the MobiledgeX API.</li>
<li>Transform the data into CSV.</li>
<li>Write the data out to *.csv files for each metric class.</li>
<li>Sleep for 30 seconds.</li>
<li>Return to step 1.</li>
</ol>
<h2 id='usage'><a class='anchor' aria-hidden='true' href='#usage'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1' width='16' height='16' aria-hidden='true'><path fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z'></path></svg></a>Usage</h2>
<p>The first step is to define the variables for your use case.</p>
<h3 id='data-output'><a class='anchor' aria-hidden='true' href='#data-output'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1' width='16' height='16' aria-hidden='true'><path fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z'></path></svg></a>Data Output</h3>
<p>The following variables define the CSV files to write to; note that the script will clear out any existing data at startup.</p>
<p><code>cpuCSV</code>
<code>memCSV</code>
<code>diskCSV</code>
<code>networkCSV</code>
<code>connectionsCSV</code></p>
<h3 id='application-detail'><a class='anchor' aria-hidden='true' href='#application-detail'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1' width='16' height='16' aria-hidden='true'><path fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z'></path></svg></a>Application Detail</h3>
<p>The following variables define the application to be monitored.</p>
<p><code>theregion</code>
<code>theapporg</code>
<code>theappname</code>
<code>theappvers</code></p>
<p>As written, the script runs at 30 second intervals and loops 80 times, which will result in a run time of roughly 40 minutes for data collection. Note that this is a rough estimate only, since the script does not take into account the amount of time the metrics collection takes. If you wish to change this, the relevant line to modify is <code>for KOUNT in {1..80} ; do</code></p>
<p>Once you have adjusted the script appropriately, your next steps are:</p>
<ol>
<li>Using mcctl, login to console.mobiledgex.net which will generate a JWT token for you to use.</li>
<li>Run the script.</li>
</ol>
<p>Once the script has completed it’s run you can use the CSV files for analysis as required. Note that the script can be interrupted at any time; the data is written to the files as it is received (ie, there is no buffering in the script).</p>
<pre><code>### Data Collection Script  
#!/bin/env bash
###########################################################################
#
# This is a simple shell script to show the process of pulling data from the MeX
# metrics API endpoint, converting it to CSV, and writing it to a file.
#
# This script is intended as a demonstration of how this process can be
# accomplished. This is not intended to be a script that can be productionized without
# major rewriting.
#
# Version 1.0
# JAS
# 20-Aug-2020
###########################################################################
##
# Output Files
##
export cpuCSV=cpu.csv
export memCSV=mem.csv
export diskCSV=disk.csv
export networkCSV=network.csv
export connectionsCSV=connections.csv
##
# Application Information
##
export theregion=EU
export theapporg=demoorg
export theappname=healthcheck
export theappvers=2.0
##
# Put Headers into the CSV
##
echo &quot;time, app, ver, cluster, clusterorg, cloudlet, cloudletorg, apporg, pod, cpu&quot; &gt; $cpuCSV
echo &quot;time, app, ver, cluster, clusterorg, cloudlet, cloudletorg, apporg, pod, sendBytes, recvBytes&quot; &gt; $network.csv
echo &quot;time, app, ver, cluster, clusterorg, cloudlet, cloudletorg, apporg, pod, mem&quot;  &gt; $memCSV
echo &quot;time, app, ver, cluster, clusterorg, cloudlet, cloudletorg, apporg, pod, disk&quot;  &gt; $diskCSV
echo &quot;time, app, ver, cluster, clusterorg, cloudlet, cloudletorg, apporg, pod, port, active, handled, accepts, bytesSent, bytesRecvd, P0, P0, P25, P50, P75, P90, P95, P99, P99.5, P99.9, P100&quot; &gt; $connectionsCSV
###
# Loop 80 Times; at 30 second loops this is roughly 40 minutes.
# Note that this will run longer than 40 minutes, since the time
# spent in the API calls.
###
for KOUNT in {1..80} ; do
echo Stats Being pulled at $(date)
# CPU
mcctl --addr https://console.mobiledgex.net  --output-format json metrics app  region=$theregion app-org=$theapporg  appname=$theappname appvers=$theappvers last=1 selector=cpu| jq -r  '.data[0].Series[0] | (.columns | map(.)) as $headers| .values | map(. as $row | $headers | with_entries({&quot;key&quot;: .value, &quot;value&quot;: $row[.key]})) | {&quot;time&quot;: .[].time | tostring, &quot;app&quot;: .[].app | tostring, &quot;ver&quot;: .[].ver | tostring, &quot;cluster&quot;: .[].cluster | tostring, &quot;clusterorg&quot;: .[].clusterorg | tostring, &quot;cloudlet&quot;: .[].cloudlet | tostring, &quot;cloudletorg&quot;: .[].cloudletorg | tostring, &quot;apporg&quot;: .[].apporg | tostring, &quot;pod&quot;: .[].pod | tostring, &quot;cpu&quot;: .[].cpu | tostring} | to_entries|map(.value)|@csv' &gt;&gt; $cpuCSV
# MEM
mcctl --addr https://console.mobiledgex.net  --output-format json metrics app  region=$theregion app-org=$theapporg  appname=$theappname appvers=$theappvers last=1 selector=mem | jq -r  '.data[0].Series[0] | (.columns | map(.)) as $headers| .values | map(. as $row | $headers | with_entries({&quot;key&quot;: .value, &quot;value&quot;: $row[.key]})) | {&quot;time&quot;: .[].time | tostring, &quot;app&quot;: .[].app | tostring, &quot;ver&quot;: .[].ver | tostring, &quot;cluster&quot;: .[].cluster | tostring, &quot;clusterorg&quot;: .[].clusterorg | tostring, &quot;cloudlet&quot;: .[].cloudlet | tostring, &quot;cloudletorg&quot;: .[].cloudletorg | tostring, &quot;apporg&quot;: .[].apporg | tostring, &quot;pod&quot;: .[].pod | tostring, &quot;mem&quot;: .[].mem | tostring} | to_entries|map(.value)|@csv' &gt;&gt; $memCSV
# Disk
mcctl --addr https://console.mobiledgex.net  --output-format json metrics app  region=$theregion app-org=$theapporg  appname=$theappname appvers=$theappvers last=1 selector=disk| jq -r  '.data[0].Series[0] | (.columns | map(.)) as $headers| .values | map(. as $row | $headers | with_entries({&quot;key&quot;: .value, &quot;value&quot;: $row[.key]})) | {&quot;time&quot;: .[].time | tostring, &quot;app&quot;: .[].app | tostring, &quot;ver&quot;: .[].ver | tostring, &quot;cluster&quot;: .[].cluster | tostring, &quot;clusterorg&quot;: .[].clusterorg | tostring, &quot;cloudlet&quot;: .[].cloudlet | tostring, &quot;cloudletorg&quot;: .[].cloudletorg | tostring, &quot;apporg&quot;: .[].apporg | tostring, &quot;pod&quot;: .[].pod | tostring, &quot;disk&quot;: .[].disk | tostring} | to_entries|map(.value)|@csv' &gt;&gt; $diskCSV
# Network
mcctl --addr https://console.mobiledgex.net  --output-format json metrics app  region=$theregion app-org=$theapporg  appname=$theappname appvers=$theappvers last=1 selector=network | jq -r  '.data[0].Series[0] | (.columns | map(.)) as $headers| .values | map(. as $row | $headers | with_entries({&quot;key&quot;: .value, &quot;value&quot;: $row[.key]})) | {&quot;time&quot;: .[].time | tostring, &quot;app&quot;: .[].app | tostring, &quot;ver&quot;: .[].ver | tostring, &quot;cluster&quot;: .[].cluster | tostring, &quot;clusterorg&quot;: .[].clusterorg | tostring, &quot;cloudlet&quot;: .[].cloudlet | tostring, &quot;cloudletorg&quot;: .[].cloudletorg | tostring, &quot;apporg&quot;: .[].apporg | tostring, &quot;pod&quot;: .[].pod  | tostring, &quot;sendBytes&quot;: .[].sendBytes | tostring, &quot;recvBytes&quot;: .[].recvBytes | tostring} | to_entries|map(.value)|@csv' &gt;&gt; $networkCSV
# Connections
mcctl --addr https://console.mobiledgex.net  --output-format json metrics app  region=$theregion app-org=$theapporg  appname=$theappname appvers=$theappvers last=1 selector=connections | jq -r  '.data[0].Series[0] | (.columns | map(.)) as $headers| .values | map(. as $row | $headers | with_entries({&quot;key&quot;: .value, &quot;value&quot;: $row[.key]})) | {&quot;time&quot;: .[].time | tostring, &quot;app&quot;: .[].app | tostring, &quot;ver&quot;: .[].ver | tostring, &quot;cluster&quot;: .[].cluster | tostring, &quot;clusterorg&quot;: .[].clusterorg | tostring, &quot;cloudlet&quot;: .[].cloudlet | tostring, &quot;cloudletorg&quot;: .[].cloudletorg | tostring, &quot;apporg&quot;: .[].apporg | tostring, &quot;pod&quot;: .[].pod  | tostring, &quot;port&quot;: .[].port | tostring, &quot;active&quot;: .[].active | tostring, &quot;handled&quot;: .[].handled | tostring, &quot;accepts&quot;: .[].accepts | tostring, &quot;bytesSent&quot;: .[].bytesSent | tostring, &quot;bytesRecvd&quot;: .[].bytesRecvd | tostring, &quot;P0&quot;: .[].PO | tostring | tostring, &quot;P0&quot;: .[].P0 | tostring, &quot;P25&quot;: .[].P25 | tostring, &quot;P50&quot;: .[].P50 | tostring, &quot;P75&quot;: .[].P75 | tostring, &quot;P90&quot;: .[].P90 | tostring, &quot;P95&quot;: .[].P95 | tostring, &quot;P99&quot;: .[].P99 | tostring, &quot;P99.5&quot;: .[].&quot;P99.5&quot; | tostring, &quot;P99.9&quot;: .[].&quot;P99.9&quot; | tostring, &quot;P100&quot;: .[].P100 | tostring} | to_entries|map(.value)|@csv' &gt;&gt; $connectionsCSV
echo &quot;Sleeping for 15 seconds&quot;
sleep 15
echo &quot;Finished Loop $KOUNT&quot;
done
</code></pre>
<h2 id='contact-support'><a class='anchor' aria-hidden='true' href='#contact-support'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1' width='16' height='16' aria-hidden='true'><path fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z'></path></svg></a>Contact support</h2>
<p>If you have reviewed our <a href="https://developers.mobiledgex.com">documentation set</a> and <a href="https://developers.mobiledgex.com/support">FAQ</a> page, and unable to find an answer to your question, you can contact our <a href="mailto:support@mobiledgex.com">Support Team</a>.</p>
<p>You can also email the <a href="mailto:support@mobiledgex.com">Support Team</a> to assist you in resolving product issues. To help expedite your request, make sure you copy and paste the tracid, which can be found on the audit logs page, into your email with a brief description of your issue.</p>

</div>

              <link rel="stylesheet" href="/css/simplebox.min.css" />
<script src="/js/simplebox.min.js"></script>
<script type="text/javascript">
  $(function() {
    $(".slb").simplebox()
  });
</script>

<div class="footer">
  <div class="container">
    <div class="row">
      <div class="col-12">
        <a class="brand" href="/"></a>
        <div class="text-center"><p>©2022 MobiledgeX, Inc. 333 W. San Carlos Street Ste. 600, San Jose, CA 95110  | <a href="https://www.mobiledgex.com/privacy-policy">Privacy Policy</a> | <a href="https://www.mobiledgex.com/terms-of-use">Terms of Use</a> | <a href="https://www.mobiledgex.com/contact">Contact</a></p>
</div>
      </div>
    </div>
  </div>

            </div>
          </div>
        </div>
      </main>
            
    </div>
  </div>

  

    <script type="text/javascript">
    tocbot.init({
      // Where to render the table of contents.
      tocSelector: '.toc',
      // Where to grab the headings to build the table of contents.
      contentSelector: '.duik-content',
      // Which headings to grab inside of the contentSelector element.
      headingSelector: 'h2, h3',
      // For headings inside relative or absolute positioned containers within content.
      hasInnerContainers: false,
      listItemClass: 'duik-content-nav__item',
      orderedList: false,
      listClass: 'js-scroll-nav duik-content-nav',
      collapseDepth: 6,
      activeLinkClass: 'active',
    })
    $(document).ready(function() {
      hljs.highlightAll()
    });
  </script>
  </body>

</html>
